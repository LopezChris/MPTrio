<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>SJSU One API: I2C_Base Class Reference</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">SJSU One API </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part --><!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">I2C_Base Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d7/dee/i2c__base_8hpp_source.html">i2c_base.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for I2C_Base:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d68/classI2C__Base__inherit__graph.png" border="0" usemap="#I2C__Base_inherit__map" alt="Inheritance graph"/></div>
<map name="I2C__Base_inherit__map" id="I2C__Base_inherit__map">
<area shape="rect" id="node2" href="../../d1/d29/classI2C2.html" title="I2C2" alt="" coords="20,80,71,107"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a91503a44a5f9ff228354245c8c6ec9bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a91503a44a5f9ff228354245c8c6ec9bc">handleInterrupt</a> ()</td></tr>
<tr class="separator:a91503a44a5f9ff228354245c8c6ec9bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5322c60fd88a0920df335964613c76c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#ad5322c60fd88a0920df335964613c76c">readReg</a> (uint8_t deviceAddress, uint8_t registerAddress)</td></tr>
<tr class="separator:ad5322c60fd88a0920df335964613c76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f71fbf12351a0e5f1c0e0452e999b17"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a1f71fbf12351a0e5f1c0e0452e999b17">writeReg</a> (uint8_t deviceAddress, uint8_t registerAddress, uint8_t value)</td></tr>
<tr class="separator:a1f71fbf12351a0e5f1c0e0452e999b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8def06ef5ebcdc8fb5f3a21f4a4be166"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a8def06ef5ebcdc8fb5f3a21f4a4be166">readRegisters</a> (uint8_t deviceAddress, uint8_t firstReg, uint8_t *pData, uint32_t transferSize)</td></tr>
<tr class="separator:a8def06ef5ebcdc8fb5f3a21f4a4be166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11db0de4b6517813d50752b9f053dc5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a11db0de4b6517813d50752b9f053dc5f">writeRegisters</a> (uint8_t deviceAddress, uint8_t firstReg, uint8_t *pData, uint32_t transferSize)</td></tr>
<tr class="separator:a11db0de4b6517813d50752b9f053dc5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1ffc13066ed8b2a2443fdec63f6d27"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a7b1ffc13066ed8b2a2443fdec63f6d27">checkDeviceResponse</a> (uint8_t deviceAddress)</td></tr>
<tr class="separator:a7b1ffc13066ed8b2a2443fdec63f6d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a12caefb41201a7eefe2bc511e48bbd8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a12caefb41201a7eefe2bc511e48bbd8f">I2C_Base</a> (<a class="el" href="../../d8/d12/structLPC__I2C__TypeDef.html">LPC_I2C_TypeDef</a> *pI2CBaseAddr)</td></tr>
<tr class="separator:a12caefb41201a7eefe2bc511e48bbd8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7dd7ef20cedca783ff49413d5765fac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#aa7dd7ef20cedca783ff49413d5765fac">init</a> (uint32_t pclk, uint32_t busRateInKhz)</td></tr>
<tr class="separator:aa7dd7ef20cedca783ff49413d5765fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44944d722c91374502bba78dbe27d923"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d3d/classI2C__Base.html#a44944d722c91374502bba78dbe27d923">disableOperation</a> ()</td></tr>
<tr class="separator:a44944d722c91374502bba78dbe27d923"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C Base class that can be used to write drivers for all I2C peripherals. Steps needed to write a I2C driver:</p><ul>
<li>Inherit this class</li>
<li>Call <a class="el" href="../../df/d3d/classI2C__Base.html#aa7dd7ef20cedca783ff49413d5765fac">init()</a> and configure PINSEL to select your I2C pins</li>
<li>When your I2C(#) hardware interrupt occurs, call <a class="el" href="../../df/d3d/classI2C__Base.html#a91503a44a5f9ff228354245c8c6ec9bc">handleInterrupt()</a></li>
</ul>
<p>To connect I2C Interrupt with your I2C, reference this example: </p><div class="fragment"><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span></div><div class="line"> {</div><div class="line">    <span class="keywordtype">void</span> <a class="code" href="../../de/dc0/startup_8cpp.html#a4d1f9a7702a354022ff322a565f8c82b">I2C0_IRQHandler</a>()</div><div class="line">    {</div><div class="line">        I2C0::getInstance().handleInterrupt();</div><div class="line">    }</div><div class="line"> }</div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a12caefb41201a7eefe2bc511e48bbd8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">I2C_Base::I2C_Base </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d12/structLPC__I2C__TypeDef.html">LPC_I2C_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>pI2CBaseAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Protected constructor that requires parent class to provide I2C base register address for which to operate this I2C driver </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7b1ffc13066ed8b2a2443fdec63f6d27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_Base::checkDeviceResponse </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>deviceAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function can be used to check if an I2C device responds to its address, which can therefore be used to discover all I2C hardware devices. Sometimes this method is used by devices to check if they are ready for further operations such as an EEPROM or FLASH memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceAddress</td><td>The device address to check for I2C response </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if I2C device with given address is ready </dd></dl>

</div>
</div>
<a class="anchor" id="a44944d722c91374502bba78dbe27d923"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_Base::disableOperation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Disables I2C operation This can be used to disable all I2C operations in case of severe I2C Bus Failure </p><dl class="section warning"><dt>Warning</dt><dd>Once disabled, I2C cannot be enabled again </dd></dl>

</div>
</div>
<a class="anchor" id="a91503a44a5f9ff228354245c8c6ec9bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_Base::handleInterrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When the I2C interrupt occurs, this function should be called to handle future action to take due to the interrupt cause. </p>

</div>
</div>
<a class="anchor" id="aa7dd7ef20cedca783ff49413d5765fac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_Base::init </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pclk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>busRateInKhz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes I2C Communication BUS </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pclk</td><td>The peripheral clock to the I2C Bus </td></tr>
    <tr><td class="paramname">busRateInKhz</td><td>The speed to set for this I2C Bus </td></tr>
  </table>
  </dd>
</dl>
<p>Per I2C high speed mode: HS mode master devices generate a serial clock signal with a HIGH to LOW ratio of 1 to 2. So to be able to optimize speed, we use different duty cycle for high/low</p>
<p>Compute the I2C clock dividers. The LOW period can be longer than the HIGH period because the rise time of SDA/SCL is an RC curve, whereas the fall time is a sharper curve.</p>

</div>
</div>
<a class="anchor" id="ad5322c60fd88a0920df335964613c76c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_Base::readReg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>deviceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a single byte from an I2C Slave </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceAddress</td><td>The I2C Device Address </td></tr>
    <tr><td class="paramname">registerAddress</td><td>The register address to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte read from slave device (might be 0 if error) </dd></dl>

</div>
</div>
<a class="anchor" id="a8def06ef5ebcdc8fb5f3a21f4a4be166"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_Base::readRegisters </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>deviceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>firstReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>transferSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

</div>
</div>
<a class="anchor" id="a1f71fbf12351a0e5f1c0e0452e999b17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_Base::writeReg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>deviceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>registerAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a single byte to an I2C Slave </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceAddress</td><td>The I2C Device Address </td></tr>
    <tr><td class="paramname">registerAddress</td><td>The register address to write </td></tr>
    <tr><td class="paramname">value</td><td>The value to write to registerAddress </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a11db0de4b6517813d50752b9f053dc5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2C_Base::writeRegisters </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>deviceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>firstReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>transferSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/var/www/html/SJSU-DEV-Linux/firmware/default/lib/L2_Drivers/base/<a class="el" href="../../d7/dee/i2c__base_8hpp_source.html">i2c_base.hpp</a></li>
<li>/var/www/html/SJSU-DEV-Linux/firmware/default/lib/L2_Drivers/base/<a class="el" href="../../d7/dc3/i2c__base_8cpp.html">i2c_base.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
