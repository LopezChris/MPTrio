<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>SJSU One API: /var/www/html/SJSU-DEV-Linux/firmware/default/lib/L3_Utils/tlm/c_tlm_stream.h File Reference</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">SJSU One API </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part --><!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="../../dir_1cd4931aa993753d363e928640341ec9.html">default</a></li><li class="navelem"><a class="el" href="../../dir_98f6e3228cef689a79f0d5c275585dc1.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_04e648c8c7ed553c8e2aab96df744dcb.html">L3_Utils</a></li><li class="navelem"><a class="el" href="../../dir_4411c173feba89887e0932c13788c012.html">tlm</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">c_tlm_stream.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Telemetry stream and decode.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d8/d5e/c__tlm__comp_8h_source.html">c_tlm_comp.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for c_tlm_stream.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d80/c__tlm__stream_8h__incl.png" border="0" usemap="#_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8h" alt=""/></div>
<map name="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8h" id="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8h">
<area shape="rect" id="node2" href="../../d8/d5e/c__tlm__comp_8h.html" title="c_tlm_comp.h" alt="" coords="33,124,137,151"/>
<area shape="rect" id="node3" href="../../d4/df8/c__list_8h.html" title="c_list.h" alt="" coords="53,199,117,225"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d7a/c__tlm__stream_8h__dep__incl.png" border="0" usemap="#_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8hdep" alt=""/></div>
<map name="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8hdep" id="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L3__Utils_2tlm_2c__tlm__stream_8hdep">
<area shape="rect" id="node2" href="../../d8/d8e/scheduler__task_8cpp.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L3_Utils\l/src/scheduler_task.cpp" alt="" coords="5,124,167,195"/>
<area shape="rect" id="node3" href="../../d9/d04/c__tlm__stream_8c.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L3_Utils\l/tlm/src/c_tlm_stream.c" alt="" coords="191,124,351,195"/>
</map>
</div>
</div>
<p><a href="../../de/d56/c__tlm__stream_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a86c7c9f8999948664e145cbf486461ae"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a86c7c9f8999948664e145cbf486461ae">stream_callback_type</a>) (const char *<a class="el" href="../../d9/d36/classstr.html">str</a>, void *arg)</td></tr>
<tr class="separator:a86c7c9f8999948664e145cbf486461ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac9a8122bcf2cb29d1a104b284ff35fb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#ac9a8122bcf2cb29d1a104b284ff35fb8">tlm_stream_one</a> (<a class="el" href="../../dc/de7/structtlm__component.html">tlm_component</a> *comp, <a class="el" href="../../de/d56/c__tlm__stream_8h.html#a86c7c9f8999948664e145cbf486461ae">stream_callback_type</a> stream, void *print_ascii, void *arg)</td></tr>
<tr class="separator:ac9a8122bcf2cb29d1a104b284ff35fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77af06081887c1d1d21f5f18edd5aab4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a77af06081887c1d1d21f5f18edd5aab4">tlm_stream_all</a> (<a class="el" href="../../de/d56/c__tlm__stream_8h.html#a86c7c9f8999948664e145cbf486461ae">stream_callback_type</a> stream_func, void *arg, bool ascii)</td></tr>
<tr class="separator:a77af06081887c1d1d21f5f18edd5aab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a453678fa30b3746fe11ac11585994d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a9a453678fa30b3746fe11ac11585994d">tlm_stream_one_file</a> (<a class="el" href="../../dc/de7/structtlm__component.html">tlm_component</a> *comp_ptr, FILE *file)</td></tr>
<tr class="separator:a9a453678fa30b3746fe11ac11585994d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949eeebc2158a96884f098a752a29482"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a949eeebc2158a96884f098a752a29482">tlm_stream_all_file</a> (FILE *file)</td></tr>
<tr class="separator:a949eeebc2158a96884f098a752a29482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e9b10e5f9cd96fc836a00c1ebb7e82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a76e9b10e5f9cd96fc836a00c1ebb7e82">tlm_stream_decode_file</a> (FILE *file)</td></tr>
<tr class="separator:a76e9b10e5f9cd96fc836a00c1ebb7e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Telemetry stream and decode. </p>
<p>Telemetry stream sends encoded ASCII data stream to the provided stream function. Example stream : </p><pre class="fragment"> START:my_component:3
 a:4:1:1:DE,AD,BE,EF
 b:2:1:1:02,00
 c:1:1:1:11
 END:my_component</pre></div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a86c7c9f8999948664e145cbf486461ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* stream_callback_type) (const char *<a class="el" href="../../d9/d36/classstr.html">str</a>, void *arg)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each stream starts with the tag START and ends with END After the colon is the name of the component and then the number of variables registered in this component. Then the variables' data follows :</p><ul>
<li>The name of the variable</li>
<li>Number of bytes per variable</li>
<li>Number of elements per array (1 for a single variable)</li>
<li>Variable type. <dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d1/d42/c__tlm__var_8h.html#a429969e0329f4a2abc124b7cef77fb29">tlm_type</a> at <a class="el" href="../../d1/d42/c__tlm__var_8h.html">c_tlm_var.h</a></dd></dl>
</li>
<li>HEX bytes</li>
</ul>
<p>Telemetry decode will do the opposite. It will decode an incoming stream, and based on the stream, it will find the component and the registered variable and set the value of the variable based on the stream. This functionality can be used to take a saved data stream, and set the variables' data value based on the stream. In particular, the registered variables' values can be restored based on a previously saved telemetry stream from a disk etc.</p>
<p>Here is an example of saving the stream into a C++ string : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void string_stream(const char* s, void *arg) {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    std::string *str = (std::string*)arg;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    (*str) += s;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;}</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;std::string str = &quot;&quot;;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;tlm_stream_one(my_comp, string_stream, &amp;str);</div></div><!-- fragment --><p> Typedef of the stream callback function </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>The ASCII string containing partial stream </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a77af06081887c1d1d21f5f18edd5aab4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlm_stream_all </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a86c7c9f8999948664e145cbf486461ae">stream_callback_type</a>&#160;</td>
          <td class="paramname"><em>stream_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ascii</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Streams the telemetry for ALL registered components and their variables </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream_func</td><td>The callback stream function that will receive the strings to print </td></tr>
    <tr><td class="paramname">arg</td><td>This argument will be passed to your stream function as its argument </td></tr>
    <tr><td class="paramname">ascii</td><td>If true, ASCII values are printed, rather than hex value of the data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a949eeebc2158a96884f098a752a29482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlm_stream_all_file </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Streams all components to a file </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>Could be stdout, stderr, or an opened file handle Example: To printf the telemetry, just use "tlm_stream_all_file(stdio);" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a76e9b10e5f9cd96fc836a00c1ebb7e82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tlm_stream_decode_file </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is similar to tlm_stream_decode(char*) except that it decodes stream from an opened file handle. The file will be read until fgets() fails. </p><dl class="section return"><dt>Returns</dt><dd>true when telemetry decode finds correct stream header. </dd></dl>

</div>
</div>
<a class="anchor" id="ac9a8122bcf2cb29d1a104b284ff35fb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlm_stream_one </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/structtlm__component.html">tlm_component</a> *&#160;</td>
          <td class="paramname"><em>comp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d56/c__tlm__stream_8h.html#a86c7c9f8999948664e145cbf486461ae">stream_callback_type</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>print_ascii</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sca</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Streams the telemetry for one component and its variables </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The callback stream function that will receive the strings to print </td></tr>
    <tr><td class="paramname">print_ascii</td><td>If non-null, the data will be printed as ASCII values rather than hex values </td></tr>
    <tr><td class="paramname">arg</td><td>This argument will be passed to your stream function as its argument</td></tr>
  </table>
  </dd>
</dl>
<p>Callback function for each component </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sca</td><td>Stream callback argument </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9a453678fa30b3746fe11ac11585994d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tlm_stream_one_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/de7/structtlm__component.html">tlm_component</a> *&#160;</td>
          <td class="paramname"><em>comp_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Streams your provided component telemetry into a file pointer </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comp_ptr</td><td>The telemetry component pointer </td></tr>
    <tr><td class="paramname">file</td><td>Could be stdout, stderr, or an opened file handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
