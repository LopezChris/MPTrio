<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>SJSU One API: /var/www/html/SJSU-DEV-Linux/firmware/default/lib/L4_IO/wireless/src/mesh.h File Reference</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">SJSU One API </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part --><!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="../../dir_1cd4931aa993753d363e928640341ec9.html">default</a></li><li class="navelem"><a class="el" href="../../dir_98f6e3228cef689a79f0d5c275585dc1.html">lib</a></li><li class="navelem"><a class="el" href="../../dir_b0dc845ac9411c4da6fe9228642d207e.html">L4_IO</a></li><li class="navelem"><a class="el" href="../../dir_cd408842faec11fe5b389c4eac32f511.html">wireless</a></li><li class="navelem"><a class="el" href="../../dir_96c6e48c721d512b3f7a318b36dc5927.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mesh.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Simple Mesh Network Algorithm.VERSION:  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/d39/mesh__typedefs_8h_source.html">mesh_typedefs.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mesh.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d74/mesh_8h__incl.png" border="0" usemap="#_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8h" alt=""/></div>
<map name="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8h" id="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8h">
<area shape="rect" id="node2" href="../../db/d39/mesh__typedefs_8h.html" title="Mesh type defines. " alt="" coords="71,124,194,151"/>
<area shape="rect" id="node5" href="../../db/de9/mesh__config_8h.html" title="Mesh configuration file. " alt="" coords="194,199,301,225"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/db2/mesh_8h__dep__incl.png" border="0" usemap="#_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8hdep" alt=""/></div>
<map name="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8hdep" id="_2var_2www_2html_2SJSU-DEV-Linux_2firmware_2default_2lib_2L4__IO_2wireless_2src_2mesh_8hdep">
<area shape="rect" id="node2" href="../../d6/d6b/mesh_8c.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L4_IO/wireless\l/src/mesh.c" alt="" coords="5,124,179,195"/>
<area shape="rect" id="node3" href="../../dd/dc2/wireless_8c.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L4_IO/wireless\l/src/wireless.c" alt="" coords="95,243,268,313"/>
<area shape="rect" id="node4" href="../../d5/d1f/wireless_8h.html" title="This provides simplified way to send/receive data from Nordic wireless chip. ALL WIRELESS DATA should..." alt="" coords="287,124,460,195"/>
<area shape="rect" id="node5" href="../../d5/d4e/lpc__sys_8cpp.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L0_LowLevel\l/source/lpc_sys.cpp" alt="" coords="292,243,455,313"/>
<area shape="rect" id="node6" href="../../d7/de9/nrf__stream_8hpp.html" title="Nordic stream. " alt="" coords="479,243,628,313"/>
<area shape="rect" id="node7" href="../../d3/ddb/nrf__stream_8cpp.html" title="/var/www/html/SJSU\l&#45;DEV&#45;Linux/firmware\l/default/lib/L2_Drivers\l/src/nrf_stream.cpp" alt="" coords="535,361,684,432"/>
</map>
</div>
</div>
<p><a href="../../d8/d3b/mesh_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6f15321e3f9a562db7aa2ef80b3c9678"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a6f15321e3f9a562db7aa2ef80b3c9678">mesh_init</a> (const uint8_t local_node_id, const bool is_mesh_node, const char *node_name, const <a class="el" href="../../dc/da8/structmesh__driver__t.html">mesh_driver_t</a> driver, const bool discovery)</td></tr>
<tr class="separator:a6f15321e3f9a562db7aa2ef80b3c9678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99477e3755819bb0efed800e004c1146"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a99477e3755819bb0efed800e004c1146">mesh_set_node_address</a> (const uint8_t local_node_id)</td></tr>
<tr class="separator:a99477e3755819bb0efed800e004c1146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9408ef3e299e62d09b57f6b123f72b0e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a9408ef3e299e62d09b57f6b123f72b0e">mesh_get_node_address</a> (void)</td></tr>
<tr class="separator:a9408ef3e299e62d09b57f6b123f72b0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb50d3a747c90270e7023d8fab5d645"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a4bb50d3a747c90270e7023d8fab5d645">mesh_set_retry_count</a> (const uint8_t count)</td></tr>
<tr class="separator:a4bb50d3a747c90270e7023d8fab5d645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03cc4bb7106a1f1b3ee8c69904a38cb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a03cc4bb7106a1f1b3ee8c69904a38cb2">mesh_service</a> (void)</td></tr>
<tr class="separator:a03cc4bb7106a1f1b3ee8c69904a38cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c45fae1c0b0119122ad5900790c28f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a9c45fae1c0b0119122ad5900790c28f5">mesh_send</a> (const uint8_t dst, const <a class="el" href="../../db/d39/mesh__typedefs_8h.html#a4e50257f904223b4cb6473811f8f709f">mesh_protocol_t</a> type, const void *pData, const uint8_t <a class="el" href="../../de/dc0/startup_8cpp.html#a77124bd5f7e31e6fffc19f335da0c23f">len</a>, const uint8_t hop_count_max)</td></tr>
<tr class="separator:a9c45fae1c0b0119122ad5900790c28f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23bd78e863b4ed4db7609870528ff116"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a23bd78e863b4ed4db7609870528ff116">mesh_form_pkt</a> (mesh_packet_t *pkt, const uint8_t dst, const <a class="el" href="../../db/d39/mesh__typedefs_8h.html#a4e50257f904223b4cb6473811f8f709f">mesh_protocol_t</a> type, const uint8_t hop_count_max, uint8_t num_ptrs,...)</td></tr>
<tr class="separator:a23bd78e863b4ed4db7609870528ff116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a837258fd96147b9e12f56ab4ebc02f0d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a837258fd96147b9e12f56ab4ebc02f0d">mesh_send_formed_pkt</a> (mesh_packet_t *pkt)</td></tr>
<tr class="separator:a837258fd96147b9e12f56ab4ebc02f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7abd39828420060487920365fe13a40"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#ad7abd39828420060487920365fe13a40">mesh_deform_pkt</a> (mesh_packet_t *pkt, uint8_t num_ptrs,...)</td></tr>
<tr class="separator:ad7abd39828420060487920365fe13a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8961cdfa52d82bcf723b1d537b649eef"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d1/d5b/structmesh__rte__table__t.html">mesh_rte_table_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a8961cdfa52d82bcf723b1d537b649eef">mesh_get_routing_entry</a> (const uint8_t route_num)</td></tr>
<tr class="separator:a8961cdfa52d82bcf723b1d537b649eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f5a4bee631d6a5c68576b6362ea31d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#aa6f5a4bee631d6a5c68576b6362ea31d">mesh_get_num_routing_entries</a> (void)</td></tr>
<tr class="separator:aa6f5a4bee631d6a5c68576b6362ea31d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4e201c5da747f7b9b3286fd0cea3903"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#ad4e201c5da747f7b9b3286fd0cea3903">mesh_is_route_known</a> (const uint8_t addr)</td></tr>
<tr class="separator:ad4e201c5da747f7b9b3286fd0cea3903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeed880a57b13c988fcf1ebba46c0041"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#afeed880a57b13c988fcf1ebba46c0041">mesh_get_pnd_pkt_count</a> (void)</td></tr>
<tr class="separator:afeed880a57b13c988fcf1ebba46c0041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5d966e151a221d83129fdf544803f8c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#ab5d966e151a221d83129fdf544803f8c">mesh_get_expected_ack_time</a> (uint8_t node_addr)</td></tr>
<tr class="separator:ab5d966e151a221d83129fdf544803f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a9dcdc4b83c7afd65179f5fad6c501"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a69a9dcdc4b83c7afd65179f5fad6c501">mesh_get_max_timeout_before_packet_fails</a> (uint8_t node_addr)</td></tr>
<tr class="separator:a69a9dcdc4b83c7afd65179f5fad6c501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a49ced8179b340e1a68c6c8b6dbe3e3"><td class="memItemLeft" align="right" valign="top">mesh_stats_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a7a49ced8179b340e1a68c6c8b6dbe3e3">mesh_get_stats</a> (void)</td></tr>
<tr class="separator:a7a49ced8179b340e1a68c6c8b6dbe3e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a09f896f0dd65fe97af63048ffbb80d39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d39/mesh__typedefs_8h.html#a127c488ccfa1bb458510e631aea7b519">mesh_error_mask_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a09f896f0dd65fe97af63048ffbb80d39">mesh_get_error_mask</a> (void)</td></tr>
<tr class="separator:a09f896f0dd65fe97af63048ffbb80d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f3443af5943ab766d146b1cf85d8538"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d3b/mesh_8h.html#a6f3443af5943ab766d146b1cf85d8538">mesh_reset_error_mask</a> (void)</td></tr>
<tr class="memdesc:a6f3443af5943ab766d146b1cf85d8538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the error mask to zero.  <a href="#a6f3443af5943ab766d146b1cf85d8538">More...</a><br /></td></tr>
<tr class="separator:a6f3443af5943ab766d146b1cf85d8538"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simple Mesh Network Algorithm.</p>
<p>VERSION: </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/de9/mesh__config_8h.html" title="Mesh configuration file. ">mesh_config.h</a> version and change history information.</dd></dl>
<dl class="section user"><dt>Simple Mesh Algorithm for low powered radios.</dt><dd>This library has small footprint with minimal code and RAM requirements. Each node can be a repeater node, and contains its own routing table.</dd></dl>
<dl class="section user"><dt>Types of Packets</dt><dd><ul>
<li>NACK : "Fire-and-Forget" packet, no acknowledgment from receiver.</li>
<li>ACK : Receiver will auto-acknowledge, and packet is retransmitted if ACK not received.</li>
<li>Broadcast, and Application ACK</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Example Initialization Code:</dt><dd>Assuming the radio functions and application receive function is provided, init() code is simple :</dd></dl>
<div class="fragment"><div class="line"> <span class="comment">// Example mesh callback function :</span></div><div class="line"> <span class="keywordtype">int</span> my_radio_init(<span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> <a class="code" href="../../de/dc0/startup_8cpp.html#a77124bd5f7e31e6fffc19f335da0c23f">len</a>)</div><div class="line"> {</div><div class="line">     <span class="comment">// Initialize your radio chip.</span></div><div class="line"> }</div><div class="line"></div><div class="line"> <span class="comment">// Example timer function</span></div><div class="line"> <span class="keywordtype">int</span> my_timer_get(<span class="keywordtype">void</span> *pData, <span class="keywordtype">int</span> <a class="code" href="../../de/dc0/startup_8cpp.html#a77124bd5f7e31e6fffc19f335da0c23f">len</a>) {</div><div class="line">     <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../d6/db4/trace_2readme_8txt.html#ab1dec86efb716110c1bbcfec4dda55f1">ok</a> = (<span class="keyword">sizeof</span>(uint32_t) == len);           <span class="comment">// Size passed in will be uint32_t</span></div><div class="line">     <span class="keyword">const</span> uint32_t timerValueMs = your_sys_timer_get();  <span class="comment">// Get your system timer value</span></div><div class="line">     <span class="keywordflow">if</span> (ok) {</div><div class="line">         uint32_t *timer = (uint32_t*)pData;</div><div class="line">         *timer = timerValueMs;</div><div class="line">     }</div><div class="line">     <span class="keywordflow">return</span> <a class="code" href="../../d6/db4/trace_2readme_8txt.html#ab1dec86efb716110c1bbcfec4dda55f1">ok</a>;</div><div class="line"> }</div><div class="line"></div><div class="line">Mesh_DriverStruct driver;</div><div class="line">driver.radio_init = my_radio_init;</div><div class="line">driver.radio_send = my_radio_send;</div><div class="line">driver.radio_recv = my_radio_recv;</div><div class="line">driver.app_recv   = my_app_recv;</div><div class="line">driver.get_timer  = my_timer_get;</div><div class="line"></div><div class="line"><span class="keywordtype">char</span> my_node_id = 0x10;</div><div class="line"><a class="code" href="../../d6/d6b/mesh_8c.html#ad31343f85f5d8ecf0f347b210f7eb299">mesh_init</a>(my_node_id, <span class="keyword">true</span>, &amp;driver, <span class="keyword">true</span>);</div></div><!-- fragment --><dl class="section user"><dt>Sample code for a node receiving data :</dt><dd><div class="fragment"><div class="line"> <span class="comment">// Global variables</span></div><div class="line">mesh_packet_t packet;</div><div class="line"><span class="keywordtype">bool</span> rx = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="comment">// Application receive callback</span></div><div class="line"><span class="keywordtype">int</span> my_app_recv(<span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> len)</div><div class="line">{</div><div class="line">     memcpy(&amp;packet, data, len);</div><div class="line">     rx = <span class="keyword">true</span>;</div><div class="line">}</div><div class="line"></div><div class="line"> <span class="comment">// main loop :</span></div><div class="line"><span class="keywordflow">while</span>(1) {</div><div class="line">    <a class="code" href="../../d6/d6b/mesh_8c.html#a03cc4bb7106a1f1b3ee8c69904a38cb2">mesh_service</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(rx) {</div><div class="line">        rx = <span class="keyword">false</span>;</div><div class="line">        <span class="keywordflow">if</span>(mesh_is_ack_required(&amp;packet)) {</div><div class="line">            mesh_send_ack(<span class="stringliteral">&quot;Hello Back&quot;</span>, 10, &amp;packet);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --></dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Care needs to be taken for single radio systems when they send out a packet. You don't want the mesh route discovery packet to be repeated at the same time by the nearby nodes because their data will collide and nothing will go through. The radio send function can then be modified with logic similar to : <div class="fragment"><div class="line"><span class="keywordtype">char</span> my_radio_send(<span class="keywordtype">char</span>* pData, <span class="keywordtype">int</span> len)</div><div class="line">{</div><div class="line">  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d6b/mesh_8c.html#a9408ef3e299e62d09b57f6b123f72b0e">mesh_get_node_address</a>() != pkt-&gt;nwk.src) {</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="../../db/de9/mesh__config_8h.html#a63ca5705e9ee192e6e154cb7b1644252">MESH_ZERO_ADDR</a> == pkt-&gt;mac.dst) {</div><div class="line">        <span class="keyword">const</span> uint32_t timeSlotDelayUs = ((rand() % slots) + 1) * pkt_air_time_us;</div><div class="line">        <a class="code" href="../../d7/db6/utilities_8c.html#aa43c73d8be7eb210407d04ce9567d64b">delay_us</a>(timeSlotDelayUs); </div><div class="line">    }</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ad7abd39828420060487920365fe13a40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_deform_pkt </td>
          <td>(</td>
          <td class="paramtype">mesh_packet_t *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This does the opposite of <a class="el" href="../../d8/d3b/mesh_8h.html#a23bd78e863b4ed4db7609870528ff116">mesh_form_pkt()</a>. Instead of copying data from the pointers and storing to the packet data, this will copy the data from the packet and store to your pointers. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>The mesh packet received. </td></tr>
    <tr><td class="paramname">num_ptrs</td><td>The number of pairs of pointers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false if the packet was smaller than the data being asked to store.</dd></dl>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Assume we got a packet with a uint32_t and a float :</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;uint32_t my_int = 0;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;float my_flt = 0;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;mesh_deform_pkt(&amp;pkt, 2,</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                &amp;my_flt, sizeof(my_flt),</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                &amp;my_int, sizeof(my_int));</div></div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a23bd78e863b4ed4db7609870528ff116"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_form_pkt </td>
          <td>(</td>
          <td class="paramtype">mesh_packet_t *&#160;</td>
          <td class="paramname"><em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d39/mesh__typedefs_8h.html#a4e50257f904223b4cb6473811f8f709f">mesh_protocol_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>hop_count_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_ptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Form a packet by copying the data from the given pointers as variable arguments. </p><dl class="section see"><dt>See also</dt><dd>parameters of <a class="el" href="../../d8/d3b/mesh_8h.html#a9c45fae1c0b0119122ad5900790c28f5">mesh_send()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_ptrs</td><td>The number of data pointer pairs; see below. </td></tr>
    <tr><td class="paramname">...</td><td>The pairs of data pointer and the size; see below. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if packet was formed correctly. Error may be returned if you tried to send too much data that the payload cannot hold. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Once a packet is formed, it should be immediately sent because packet route may change later, so the packet may not make it through. <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mesh_packet_t pkt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;// Copy single NULL string</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;mesh_form_pkt(&amp;pkt, 1, mesh_pkt_ack, 1, 1, &quot;\0&quot;, 1);</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;// Copy two strings:</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;mesh_form_pkt(&amp;pkt, 1, mesh_pkt_ack, 1,</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;              2,           // Two pairs below</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;              &quot;hello&quot;, 5,  // First pair&#39;s data, and the size</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;              &quot;world&quot;, 5); // Second pair&#39;s data, and the size</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;// Copy three variables (string, int, and float):</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;int my_int = 123;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;float my_flt = 1.23;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;mesh_form_pkt(&amp;pkt, 1, mesh_pkt_ack, 1,</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;              3,</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;              &quot;copyme&quot;, 6,</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;              &amp;my_int, sizeof(my_int),</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;              &amp;my_flt, sizeof(my_flt));</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a09f896f0dd65fe97af63048ffbb80d39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d39/mesh__typedefs_8h.html#a127c488ccfa1bb458510e631aea7b519">mesh_error_mask_t</a> mesh_get_error_mask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mesh API to get error types and reset errors Mesh layer keeps error bit fields during its operation. The error mask can be obtained and masked with mesh_error_mask_t to detect the error type, and it can be reset by this API. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mesh_error_mask_t err = mesh_get_error_mask();</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;if (e &amp; mesh_err_dup_node) {</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    // Duplicate node with our address found</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;}</div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>errors encountered during mesh network operation. </dd></dl>

</div>
</div>
<a class="anchor" id="ab5d966e151a221d83129fdf544803f8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mesh_get_expected_ack_time </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>node_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the expected number of milliseconds it should take for the destination node to send us an ACK packet. This is the most ideal time assuming no packet is lost while sending or receiving the ACK. If the route is not known, then the timeout returned is based on the assumption that it is MESH_RTE_DISCOVERY_HOPS (#define'd) hops away. </dd></dl>

</div>
</div>
<a class="anchor" id="a69a9dcdc4b83c7afd65179f5fad6c501"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t mesh_get_max_timeout_before_packet_fails </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>node_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>similar to <a class="el" href="../../d8/d3b/mesh_8h.html#ab5d966e151a221d83129fdf544803f8c">mesh_get_expected_ack_time()</a>, but the returned value is the max expected timeout after we exhaust our retries. </dd></dl>

</div>
</div>
<a class="anchor" id="a9408ef3e299e62d09b57f6b123f72b0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mesh_get_node_address </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>our mesh node address. </dd></dl>

</div>
</div>
<a class="anchor" id="aa6f5a4bee631d6a5c68576b6362ea31d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mesh_get_num_routing_entries </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The number of routing entries this node is maintaining. </dd></dl>

</div>
</div>
<a class="anchor" id="afeed880a57b13c988fcf1ebba46c0041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mesh_get_pnd_pkt_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If there are is no packet received from your radio, and there are not any pending packets, then <a class="el" href="../../d8/d3b/mesh_8h.html#a03cc4bb7106a1f1b3ee8c69904a38cb2">mesh_service()</a> doesn't have to be called periodically.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of packets that are in the pending state, means they are waiting to be acknowledged, or repeated after a timeout. </dd></dl>

</div>
</div>
<a class="anchor" id="a8961cdfa52d82bcf723b1d537b649eef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d1/d5b/structmesh__rte__table__t.html">mesh_rte_table_t</a>* mesh_get_routing_entry </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>route_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allows user to query all the routing entries. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">route_num</td><td>The route number to query : 0 - (N-1) When NULL is returned, no more route exists. If Non-NULL entry is returned, user can look at destination, the route to next destination, and number of hops it is away. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7a49ced8179b340e1a68c6c8b6dbe3e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mesh_stats_t mesh_get_stats </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The mesh network statistics structure. </dd></dl>

</div>
</div>
<a class="anchor" id="a6f15321e3f9a562db7aa2ef80b3c9678"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_init </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>local_node_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>is_mesh_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>node_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dc/da8/structmesh__driver__t.html">mesh_driver_t</a>&#160;</td>
          <td class="paramname"><em>driver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>discovery</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the Mesh Network. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">local_node_id</td><td>Node ID of your local node. </td></tr>
    <tr><td class="paramname">is_mesh_node</td><td>true, if this node can participate in Mesh to repeat packets. </td></tr>
    <tr><td class="paramname">node_name</td><td>Node name, maximum as large as a payload. </td></tr>
    <tr><td class="paramname">driver</td><td>The structure of the radio driver. </td></tr>
    <tr><td class="paramname">discovery</td><td>If true, then a broadcast message with data: "Hello\n" is sent to each node within 3 hops away for discovery and route update purpose. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Unless changed otherwise, the retry count contains default value; </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d8/d3b/mesh_8h.html#a4bb50d3a747c90270e7023d8fab5d645">mesh_set_retry_count()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ad4e201c5da747f7b9b3286fd0cea3903"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_is_route_known </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true if our routing table contains the route for the given destination address. </dd></dl>

</div>
</div>
<a class="anchor" id="a6f3443af5943ab766d146b1cf85d8538"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mesh_reset_error_mask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the error mask to zero. </p>

</div>
</div>
<a class="anchor" id="a9c45fae1c0b0119122ad5900790c28f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_send </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d39/mesh__typedefs_8h.html#a4e50257f904223b4cb6473811f8f709f">mesh_protocol_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>hop_count_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends a new packet. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination address to send data to. </td></tr>
    <tr><td class="paramname">type</td><td>The type of packet: ack, nack, app-ack </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../db/d39/mesh__typedefs_8h.html#a4e50257f904223b4cb6473811f8f709f" title="Mesh packet type. ">mesh_protocol_t</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pData</td><td>The pointer to the data to send. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the data to send. </td></tr>
    <tr><td class="paramname">hop_count_max</td><td>See the 3 use cases below :<ul>
<li>If this is a broadcast message, this controls the max hops packet can take.</li>
<li>If the route is known, then this parameter will not have any effect.</li>
<li>If the route is unknown, then this controls how far the packet can travel to search for our destined node. You can pass MESH_HOP_COUNT_MAX if you want the mesh algorithm to figure it out at the cost of utilizing the network a little more and decreasing its efficiency.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the packet was sent successfully </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function SHOULD NOT be used to send an ACK back because infinite loop of back-and-forth ACKs may occur. </dd></dl>
<dl class="section see"><dt>See also</dt><dd>mesh_send_ack() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This method and <a class="el" href="../../d8/d3b/mesh_8h.html#a03cc4bb7106a1f1b3ee8c69904a38cb2">mesh_service()</a> can be called from different threads because <a class="el" href="../../d8/d3b/mesh_8h.html#a03cc4bb7106a1f1b3ee8c69904a38cb2">mesh_service()</a> will skip its execution if we are inside a critical section. </dd></dl>

</div>
</div>
<a class="anchor" id="a837258fd96147b9e12f56ab4ebc02f0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_send_formed_pkt </td>
          <td>(</td>
          <td class="paramtype">mesh_packet_t *&#160;</td>
          <td class="paramname"><em>pkt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a packet that is already formed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pkt</td><td>The packet pointer formed by <a class="el" href="../../d8/d3b/mesh_8h.html#a23bd78e863b4ed4db7609870528ff116">mesh_form_pkt()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a03cc4bb7106a1f1b3ee8c69904a38cb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mesh_service </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method should be called periodically. This method gets the radio data, and runs the mesh algorithm. When a packet is received for you, the app_recv() call-back will be called. </p>
<dl class="section note"><dt>Note</dt><dd>When N1 sends a packet to 4 nodes it can transmit to, all four nodes will repeat the packet if the route is unknown, so we need these nodes to discard the packets they repeat to each other. However, when the origin node doesn't get an ACK back, it will r-esend the packet with the retries_rem decremented, such that all these nodes can repeat the packet instead of throwing it away. The destined node needs to only send data to application layer if packet is not a duplicate, however, for every re-sent packet, it needs to ACK back the packet.</dd></dl>

</div>
</div>
<a class="anchor" id="a99477e3755819bb0efed800e004c1146"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mesh_set_node_address </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>local_node_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method allows to change the node address after <a class="el" href="../../d8/d3b/mesh_8h.html#a6f15321e3f9a562db7aa2ef80b3c9678">mesh_init()</a> has been called. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">local_node_id</td><td>Node ID of your local node. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4bb50d3a747c90270e7023d8fab5d645"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mesh_set_retry_count </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>Number of retries used for ACK packet if ACK not received; see note below. Max value is MESH_RETRY_COUNT_MAX. Optimal value is 2 (default unless changed).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The retries apply if routes do not change but the actual retry count may be higher if nodes change routes frequency. For example, if retries are set to 2, and a node N1 sends packet to N3 through N2, then the packet may be sent 6 times:<ul>
<li>Send original packet, if no ACK, then re-send 2 more times.</li>
<li>Remove N3 route through N2 and re-send original packet to discover new route.</li>
<li>Re-send packet 2 more times if ACK still not received. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
